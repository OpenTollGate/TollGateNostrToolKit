#cat /sys/class/net/eth0/address|tr -d :
#TODO: derive password from mac address or serial number

change_root_password() {
    rootpassword="$1"
    /bin/passwd root << EOF
$rootpassword
$rootpassword
EOF
}


# Usage

if grep -q -i "hypervisor" /proc/cpuinfo; then
  change_root_password=$(head /dev/urandom | tr -dc A-Za-z0-9 | head -c 16)
  echo ${change_root_password} > /root/password
else
  change_root_password "tollgate"
fi
